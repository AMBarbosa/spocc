<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> • spocc</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spocc</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.8.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/spocc_vignette.html">UNKNOWN TITLE</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/spocc">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1></h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/spocc/blob/master/vignettes/spocc_vignette.Rmd"><code>vignettes/spocc_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>spocc_vignette.Rmd</code></div>

    </div>

    
    
<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{Introduction to the spocc package}
%\VignetteEncoding{UTF-8}
-->
<div id="species-occurrence-data-spocc" class="section level1">
<h1 class="hasAnchor">
<a href="#species-occurrence-data-spocc" class="anchor"></a>Species occurrence data (spocc)</h1>
<div id="introduction" class="section level3">
<h3 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h3>
<p>The rOpenSci projects aims to provide programmatic access to scientific data repositories on the web. A vast majority of the packages in our current suite retrieve some form of biodiversity or taxonomic data. Since several of these datasets have been georeferenced, it provides numerous opportunities for visualizing species distributions, building species distribution maps, and for using it analyses such as species distribution models. In an effort to streamline access to these data, we have developed a package called <code>spocc</code>, which provides a unified API to all the biodiversity sources that we provide. The obvious advantage is that a user can interact with a common API and not worry about the nuances in syntax that differ between packages. As more data sources come online, users can access even more data without significant changes to their code. However, it is important to note that spocc will never replicate the full functionality that exists within specific packages. Therefore users with a strong interest in one of the specific data sources listed below would benefit from familiarising themselves with the inner working of the appropriate packages.</p>
</div>
<div id="data-sources" class="section level3">
<h3 class="hasAnchor">
<a href="#data-sources" class="anchor"></a>Data Sources</h3>
<p><code>spocc</code> currently interfaces with ten major biodiversity repositories</p>
<ol style="list-style-type: decimal">
<li><p><a href="http://www.gbif.org/">Global Biodiversity Information Facility (GBIF)</a> (via <code>rgbif</code>) GBIF is a government funded open data repository with several partner organizations with the express goal of providing access to data on Earth’s biodiversity. The data are made available by a network of member nodes, coordinating information from various participant organizations and government agencies.</p></li>
<li><p><a href="https://ecoengine.berkeley.edu/">Berkeley Ecoengine</a> (via <code>ecoengine</code>) The ecoengine is an open API built by the <a href="http://globalchange.berkeley.edu/">Berkeley Initiative for Global Change Biology</a>. The repository provides access to over 3 million specimens from various Berkeley natural history museums. These data span more than a century and provide access to georeferenced specimens, species checklists, photographs, vegetation surveys and resurveys and a variety of measurements from environmental sensors located at reserves across University of California’s natural reserve system.</p></li>
<li><p><a href="http://www.inaturalist.org/">iNaturalist</a> iNaturalist provides access to crowd sourced citizen science data on species observations.</p></li>
<li><p><a href="http://vertnet.org/">VertNet</a> (via <code>rvertnet</code>) Similar to <code>rgbif</code>, ecoengine, and <code>rbison</code> (see below), VertNet provides access to more than 80 million vertebrate records spanning a large number of institutions and museums primarly covering four major disciplines (mammology, herpetology, ornithology, and icthyology). <strong>Note that we don’t currenlty support VertNet data in this package, but we should soon</strong></p></li>
<li><p><a href="https://bison.usgs.gov/">Biodiversity Information Serving Our Nation</a> (via <code>rbison</code>) Built by the US Geological Survey’s core science analytic team, BISON is a portal that provides access to species occurrence data from several participating institutions.</p></li>
<li><p><a href="http://ebird.org/content/ebird/">eBird</a> (via <code>rebird</code>) ebird is a database developed and maintained by the Cornell Lab of Ornithology and the National Audubon Society. It provides real-time access to checklist data, data on bird abundance and distribution, and communtiy reports from birders.</p></li>
<li><p><a href="http://antweb.org">AntWeb</a> (via <code>AntWeb</code>) AntWeb is the world’s largest online database of images, specimen records, and natural history information on ants. It is community driven and open to contribution from anyone with specimen records, natural history comments, or images.</p></li>
<li><p><a href="https://www.idigbio.org/">iDigBio</a> (via <code>ridigbio</code>) iDigBio facilitates the digitization of biological and paleobiological specimens and their associated data, and houses specimen data, as well as providing their specimen data via RESTful web services.</p></li>
<li><p><a href="http://www.iobis.org/">OBIS</a> OBIS (Ocean Biogeographic Information System) allows users to search marine species datasets from all of the world’s oceans.</p></li>
<li><p><a href="http://www.ala.org.au/">Atlas of Living Australia</a> ALA (Atlas of Living Australia) contains information on all the known species in Australia aggregated from a wide range of data providers: museums, herbaria, community groups, government departments, individuals and universities; it contains more than 50 million occurrence records.</p></li>
</ol>
<p><strong>Important Note:</strong> It’s important to keep in mind that several data providers interface with many of the above mentioned repositories. This means that occurence data obtained from BISON may be duplicates of data that are also available through GBIF. We do not have a way to resolve these duplicates or overlaps at this time but it is an issue we are hoping to resolve in future versions of the package. See <code><a href="../reference/spocc_duplicates.html">?spocc_duplicates</a></code>, after installation, for more.</p>
</div>
<div id="data-retrieval" class="section level3">
<h3 class="hasAnchor">
<a href="#data-retrieval" class="anchor"></a>Data retrieval</h3>
<p>The most significant function in spocc is the <code>occ</code> (short for occurrence) function. <code>occ</code> takes a query, often a species name, and searches across all data sources specified in the <code>from</code> argument. For example, one can search for all occurrences of <a href="https://www.allaboutbirds.org/guide/sharp-shinned_hawk/id">Sharp-shinned Hawks</a> (<em>Accipiter striatus</em>) from the GBIF database with the following R call.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(<span class="st">'spocc'</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">(df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/occ.html">occ</a></span>(<span class="dt">query =</span> <span class="st">'Accipiter striatus'</span>, <span class="dt">from =</span> <span class="st">'gbif'</span>))</a></code></pre></div>
<pre><code>#&gt; Searched: gbif
#&gt; Occurrences - Found: 617,957, Returned: 500
#&gt; Search type: Scientific
#&gt;   gbif: Accipiter striatus (500)</code></pre>
<p>The data returned are part of a <code>S3</code> class called <code>occdat</code>. This class has slots for each of the data sources described above. One can easily switch the source by changing the <code>from</code> parameter in the function call above.</p>
<p>Within each data source is the set of species queried. In the above example, we only asked for occurrence data for one species, but we could have asked for any number. Let’s say we asked for data for two species: <em>Accipiter striatus</em>, and <em>Pinus contorta</em>. Then the structure of the response would be</p>
<pre><code>response -- |
            | -- gbif ------- |
                              | -- Accipiter_striatus
                              | -- Pinus_contorta

            | -- ecoengine -- |
                              | -- Accipiter_striatus
                              | -- Pinus_contorta

            ... and so on for each data source
</code></pre>
<p>If you only request data from gbif, like <code>from = 'gbif'</code>, then the other four source slots are present in the response object, but have no data.</p>
<p>You can quickly get just the GBIF data by indexing to it, like</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">df<span class="op">$</span>gbif</a></code></pre></div>
<pre><code>#&gt; Species [Accipiter striatus (500)] 
#&gt; First 10 rows of [Accipiter_striatus]
#&gt; 
#&gt; # A tibble: 500 × 105
#&gt;                  name  longitude latitude  prov         issues        key
#&gt;                 &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;      &lt;int&gt;
#&gt; 1  Accipiter striatus  -97.12924 32.70085  gbif cdround,gass84 1453324136
#&gt; 2  Accipiter striatus  -84.74625 40.01773  gbif cdround,gass84 1453369124
#&gt; 3  Accipiter striatus  -72.58904 43.85320  gbif cdround,gass84 1453335509
#&gt; 4  Accipiter striatus  -96.77096 33.22315  gbif cdround,gass84 1453335637
#&gt; 5  Accipiter striatus -111.01449 32.27128  gbif cdround,gass84 1453356813
#&gt; 6  Accipiter striatus  -77.41813 39.49461  gbif cdround,gass84 1453332084
#&gt; 7  Accipiter striatus -122.05344 36.95316  gbif cdround,gass84 1453346783
#&gt; 8  Accipiter striatus -122.59224 38.05409  gbif cdround,gass84 1453398190
#&gt; 9  Accipiter striatus -100.92892 25.45035  gbif cdround,gass84 1453328268
#&gt; 10 Accipiter striatus  -96.82008 33.17463  gbif cdround,gass84 1453360827
#&gt; # ... with 490 more rows, and 99 more variables: datasetKey &lt;chr&gt;,
#&gt; #   publishingOrgKey &lt;chr&gt;, publishingCountry &lt;chr&gt;, protocol &lt;chr&gt;,
#&gt; #   lastCrawled &lt;chr&gt;, lastParsed &lt;chr&gt;, crawlId &lt;int&gt;,
#&gt; #   basisOfRecord &lt;chr&gt;, taxonKey &lt;int&gt;, kingdomKey &lt;int&gt;,
#&gt; #   phylumKey &lt;int&gt;, classKey &lt;int&gt;, orderKey &lt;int&gt;, familyKey &lt;int&gt;,
#&gt; #   genusKey &lt;int&gt;, scientificName &lt;chr&gt;, kingdom &lt;chr&gt;, phylum &lt;chr&gt;,
#&gt; #   order &lt;chr&gt;, family &lt;chr&gt;, genus &lt;chr&gt;, genericName &lt;chr&gt;,
#&gt; #   specificEpithet &lt;chr&gt;, taxonRank &lt;chr&gt;, dateIdentified &lt;chr&gt;,
#&gt; #   coordinateUncertaintyInMeters &lt;dbl&gt;, year &lt;int&gt;, month &lt;int&gt;,
#&gt; #   day &lt;int&gt;, eventDate &lt;date&gt;, modified &lt;chr&gt;, lastInterpreted &lt;chr&gt;,
#&gt; #   references &lt;chr&gt;, license &lt;chr&gt;, geodeticDatum &lt;chr&gt;, class &lt;chr&gt;,
#&gt; #   countryCode &lt;chr&gt;, country &lt;chr&gt;, rightsHolder &lt;chr&gt;,
#&gt; #   identifier &lt;chr&gt;, informationWithheld &lt;chr&gt;, verbatimEventDate &lt;chr&gt;,
#&gt; #   datasetName &lt;chr&gt;, collectionCode &lt;chr&gt;, gbifID &lt;chr&gt;,
#&gt; #   verbatimLocality &lt;chr&gt;, occurrenceID &lt;chr&gt;, taxonID &lt;chr&gt;,
#&gt; #   catalogNumber &lt;chr&gt;, recordedBy &lt;chr&gt;,
#&gt; #   `http://unknown.org/occurrenceDetails` &lt;chr&gt;, institutionCode &lt;chr&gt;,
#&gt; #   rights &lt;chr&gt;, eventTime &lt;chr&gt;, identificationID &lt;chr&gt;,
#&gt; #   identificationRemarks &lt;chr&gt;, occurrenceRemarks &lt;chr&gt;,
#&gt; #   infraspecificEpithet &lt;chr&gt;, continent &lt;chr&gt;, stateProvince &lt;chr&gt;,
#&gt; #   recordNumber &lt;chr&gt;, higherGeography &lt;chr&gt;, institutionID &lt;chr&gt;,
#&gt; #   nomenclaturalCode &lt;chr&gt;, locality &lt;chr&gt;, county &lt;chr&gt;, language &lt;chr&gt;,
#&gt; #   type &lt;chr&gt;, preparations &lt;chr&gt;, organismID &lt;chr&gt;,
#&gt; #   startDayOfYear &lt;chr&gt;, ownerInstitutionCode &lt;chr&gt;, datasetID &lt;chr&gt;,
#&gt; #   accessRights &lt;chr&gt;, verbatimElevation &lt;chr&gt;, collectionID &lt;chr&gt;,
#&gt; #   higherClassification &lt;chr&gt;, individualCount &lt;int&gt;, elevation &lt;dbl&gt;,
#&gt; #   elevationAccuracy &lt;dbl&gt;, identificationVerificationStatus &lt;chr&gt;,
#&gt; #   locationAccordingTo &lt;chr&gt;, identifiedBy &lt;chr&gt;,
#&gt; #   georeferencedDate &lt;chr&gt;, georeferencedBy &lt;chr&gt;,
#&gt; #   georeferenceProtocol &lt;chr&gt;, georeferenceVerificationStatus &lt;chr&gt;,
#&gt; #   endDayOfYear &lt;chr&gt;, verbatimCoordinateSystem &lt;chr&gt;,
#&gt; #   otherCatalogNumbers &lt;chr&gt;, previousIdentifications &lt;chr&gt;,
#&gt; #   identificationQualifier &lt;chr&gt;, samplingProtocol &lt;chr&gt;,
#&gt; #   georeferenceSources &lt;chr&gt;, sex &lt;chr&gt;, dynamicProperties &lt;chr&gt;,
#&gt; #   lifeStage &lt;chr&gt;, vernacularName &lt;chr&gt;, reproductiveCondition &lt;chr&gt;</code></pre>
<p>When you get data from multiple providers, the fields returned are slightly different, e.g.:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/occ.html">occ</a></span>(<span class="dt">query =</span> <span class="st">'Accipiter striatus'</span>, <span class="dt">from =</span> <span class="kw">c</span>(<span class="st">'gbif'</span>, <span class="st">'ecoengine'</span>), <span class="dt">limit =</span> <span class="dv">25</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">df<span class="op">$</span>gbif<span class="op">$</span>data<span class="op">$</span>Accipiter_striatus</a></code></pre></div>
<pre><code>#&gt; # A tibble: 25 × 63
#&gt;                  name  longitude latitude         issues  prov        key
#&gt;                 &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt;          &lt;chr&gt; &lt;chr&gt;      &lt;int&gt;
#&gt; 1  Accipiter striatus  -97.12924 32.70085 cdround,gass84  gbif 1453324136
#&gt; 2  Accipiter striatus  -84.74625 40.01773 cdround,gass84  gbif 1453369124
#&gt; 3  Accipiter striatus  -72.58904 43.85320 cdround,gass84  gbif 1453335509
#&gt; 4  Accipiter striatus  -96.77096 33.22315 cdround,gass84  gbif 1453335637
#&gt; 5  Accipiter striatus -111.01449 32.27128 cdround,gass84  gbif 1453356813
#&gt; 6  Accipiter striatus  -77.41813 39.49461 cdround,gass84  gbif 1453332084
#&gt; 7  Accipiter striatus -122.05344 36.95316 cdround,gass84  gbif 1453346783
#&gt; 8  Accipiter striatus -122.59224 38.05409 cdround,gass84  gbif 1453398190
#&gt; 9  Accipiter striatus -100.92892 25.45035 cdround,gass84  gbif 1453328268
#&gt; 10 Accipiter striatus  -96.82008 33.17463 cdround,gass84  gbif 1453360827
#&gt; # ... with 15 more rows, and 57 more variables: datasetKey &lt;chr&gt;,
#&gt; #   publishingOrgKey &lt;chr&gt;, publishingCountry &lt;chr&gt;, protocol &lt;chr&gt;,
#&gt; #   lastCrawled &lt;chr&gt;, lastParsed &lt;chr&gt;, crawlId &lt;int&gt;,
#&gt; #   basisOfRecord &lt;chr&gt;, taxonKey &lt;int&gt;, kingdomKey &lt;int&gt;,
#&gt; #   phylumKey &lt;int&gt;, classKey &lt;int&gt;, orderKey &lt;int&gt;, familyKey &lt;int&gt;,
#&gt; #   genusKey &lt;int&gt;, scientificName &lt;chr&gt;, kingdom &lt;chr&gt;, phylum &lt;chr&gt;,
#&gt; #   order &lt;chr&gt;, family &lt;chr&gt;, genus &lt;chr&gt;, genericName &lt;chr&gt;,
#&gt; #   specificEpithet &lt;chr&gt;, taxonRank &lt;chr&gt;, dateIdentified &lt;chr&gt;,
#&gt; #   coordinateUncertaintyInMeters &lt;dbl&gt;, year &lt;int&gt;, month &lt;int&gt;,
#&gt; #   day &lt;int&gt;, eventDate &lt;date&gt;, modified &lt;chr&gt;, lastInterpreted &lt;chr&gt;,
#&gt; #   references &lt;chr&gt;, license &lt;chr&gt;, geodeticDatum &lt;chr&gt;, class &lt;chr&gt;,
#&gt; #   countryCode &lt;chr&gt;, country &lt;chr&gt;, rightsHolder &lt;chr&gt;,
#&gt; #   identifier &lt;chr&gt;, informationWithheld &lt;chr&gt;, verbatimEventDate &lt;chr&gt;,
#&gt; #   datasetName &lt;chr&gt;, collectionCode &lt;chr&gt;, gbifID &lt;chr&gt;,
#&gt; #   verbatimLocality &lt;chr&gt;, occurrenceID &lt;chr&gt;, taxonID &lt;chr&gt;,
#&gt; #   catalogNumber &lt;chr&gt;, recordedBy &lt;chr&gt;,
#&gt; #   `http://unknown.org/occurrenceDetails` &lt;chr&gt;, institutionCode &lt;chr&gt;,
#&gt; #   rights &lt;chr&gt;, eventTime &lt;chr&gt;, identificationID &lt;chr&gt;,
#&gt; #   identificationRemarks &lt;chr&gt;, occurrenceRemarks &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">df<span class="op">$</span>ecoengine<span class="op">$</span>data<span class="op">$</span>Accipiter_striatus</a></code></pre></div>
<pre><code>#&gt; # A tibble: 25 × 17
#&gt;    longitude latitude
#&gt; *      &lt;dbl&gt;    &lt;dbl&gt;
#&gt; 1   -87.5932  41.7945
#&gt; 2   -86.9241  41.2665
#&gt; 3  -118.3016  34.0320
#&gt; 4  -118.3016  34.0320
#&gt; 5  -118.3016  34.0320
#&gt; 6  -118.3016  34.0320
#&gt; 7  -118.4415  34.2677
#&gt; 8  -118.4415  34.2677
#&gt; 9  -118.3016  34.0320
#&gt; 10 -118.3016  34.0320
#&gt; # ... with 15 more rows, and 15 more variables: url &lt;chr&gt;, key &lt;chr&gt;,
#&gt; #   observation_type &lt;chr&gt;, name &lt;chr&gt;, country &lt;chr&gt;,
#&gt; #   state_province &lt;chr&gt;, begin_date &lt;date&gt;, end_date &lt;chr&gt;, source &lt;chr&gt;,
#&gt; #   remote_resource &lt;chr&gt;, locality &lt;chr&gt;,
#&gt; #   coordinate_uncertainty_in_meters &lt;int&gt;, recorded_by &lt;chr&gt;,
#&gt; #   last_modified &lt;chr&gt;, prov &lt;chr&gt;</code></pre>
<p>We provide a function <code>occ2df</code> that pulls out a few key columns needed for making maps:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/occ2df.html">occ2df</a></span>(df)</a></code></pre></div>
<pre><code>#&gt; # A tibble: 50 × 6
#&gt;                  name  longitude latitude  prov       date        key
#&gt;                 &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;date&gt;      &lt;chr&gt;
#&gt; 1  Accipiter striatus  -97.12924 32.70085  gbif 2017-01-01 1453324136
#&gt; 2  Accipiter striatus  -84.74625 40.01773  gbif 2017-01-21 1453369124
#&gt; 3  Accipiter striatus  -72.58904 43.85320  gbif 2017-01-07 1453335509
#&gt; 4  Accipiter striatus  -96.77096 33.22315  gbif 2017-01-04 1453335637
#&gt; 5  Accipiter striatus -111.01449 32.27128  gbif 2017-01-15 1453356813
#&gt; 6  Accipiter striatus  -77.41813 39.49461  gbif 2017-01-05 1453332084
#&gt; 7  Accipiter striatus -122.05344 36.95316  gbif 2017-01-11 1453346783
#&gt; 8  Accipiter striatus -122.59224 38.05409  gbif 2017-01-31 1453398190
#&gt; 9  Accipiter striatus -100.92892 25.45035  gbif 2017-01-03 1453328268
#&gt; 10 Accipiter striatus  -96.82008 33.17463  gbif 2017-01-05 1453360827
#&gt; # ... with 40 more rows</code></pre>
</div>
<div id="fix-names" class="section level3">
<h3 class="hasAnchor">
<a href="#fix-names" class="anchor"></a>Fix names</h3>
<p>One problem you often run in to is that there can be various names for the same taxon in any one source. For example:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/occ.html">occ</a></span>(<span class="dt">query =</span> <span class="st">'Pinus contorta'</span>, <span class="dt">from =</span> <span class="kw">c</span>(<span class="st">'gbif'</span>, <span class="st">'ecoengine'</span>), <span class="dt">limit =</span> <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">df<span class="op">$</span>gbif<span class="op">$</span>data<span class="op">$</span>Pinus_contorta<span class="op">$</span>name</a></code></pre></div>
<pre><code>#&gt;  [1] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt;  [5] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt;  [9] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [13] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [17] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [21] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [25] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [29] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [33] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [37] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [41] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [45] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [49] "Pinus contorta" "Pinus contorta"</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">df<span class="op">$</span>ecoengine<span class="op">$</span>data<span class="op">$</span>Pinus_contorta<span class="op">$</span>name</a></code></pre></div>
<pre><code>#&gt;  [1] "Pinus contorta"                  "Pinus contorta"                 
#&gt;  [3] "Pinus contorta"                  "Pinus contorta"                 
#&gt;  [5] "Pinus contorta"                  "Pinus contorta"                 
#&gt;  [7] "Pinus contorta"                  "Pinus contorta"                 
#&gt;  [9] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [11] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [13] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [15] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [17] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [19] "Pinus contorta subsp. murrayana" "Pinus contorta"                 
#&gt; [21] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [23] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [25] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [27] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [29] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [31] "Pinus contorta subsp. murrayana" "Pinus contorta subsp. murrayana"
#&gt; [33] "Pinus contorta"                  "Pinus contorta subsp. murrayana"
#&gt; [35] "Pinus contorta subsp. murrayana" "Pinus contorta subsp. murrayana"
#&gt; [37] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [39] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [41] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [43] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [45] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [47] "Pinus contorta"                  "Pinus contorta"                 
#&gt; [49] "Pinus contorta"                  "Pinus contorta"</code></pre>
<p>This is fine, but when trying to make a map in which points are colored for each taxon, you can have many colors for a single taxon, where instead one color per taxon is more appropriate. There is a function in <code>spocc</code> called <code>fixnames</code>, which has a few options in which you can take the shortest names (usually just the plain binomials like <em>Homo sapiens</em>), or the original name queried, or a vector of names supplied by the user.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/fixnames.html">fixnames</a></span>(df, <span class="dt">how =</span> <span class="st">'query'</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">df<span class="op">$</span>gbif<span class="op">$</span>data<span class="op">$</span>Pinus_contorta<span class="op">$</span>name</a></code></pre></div>
<pre><code>#&gt;  [1] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt;  [5] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt;  [9] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [13] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [17] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [21] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [25] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [29] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [33] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [37] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [41] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [45] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [49] "Pinus contorta" "Pinus contorta"</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">df<span class="op">$</span>ecoengine<span class="op">$</span>data<span class="op">$</span>Pinus_contorta<span class="op">$</span>name</a></code></pre></div>
<pre><code>#&gt;  [1] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt;  [5] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt;  [9] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [13] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [17] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [21] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [25] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [29] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [33] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [37] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [41] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [45] "Pinus contorta" "Pinus contorta" "Pinus contorta" "Pinus contorta"
#&gt; [49] "Pinus contorta" "Pinus contorta"</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">df_comb &lt;-<span class="st"> </span><span class="kw"><a href="../reference/occ2df.html">occ2df</a></span>(df)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw">head</span>(df_comb); <span class="kw">tail</span>(df_comb)</a></code></pre></div>
<pre><code>#&gt; # A tibble: 6 × 6
#&gt;             name longitude latitude  prov       date        key
#&gt;            &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;date&gt;      &lt;chr&gt;
#&gt; 1 Pinus contorta   12.3983 59.59840  gbif 2017-01-03 1433805430
#&gt; 2 Pinus contorta -135.3480 57.05074  gbif 2017-01-12 1453348580
#&gt; 3 Pinus contorta   17.5647 59.84490  gbif 2017-01-25 1434022908
#&gt; 4 Pinus contorta -135.3265 57.05411  gbif 2017-01-20 1453367506
#&gt; 5 Pinus contorta   17.5646 59.84520  gbif 2017-01-07 1433834252
#&gt; 6 Pinus contorta   17.5646 59.84520  gbif 2017-01-09 1433861481</code></pre>
<pre><code>#&gt; # A tibble: 6 × 6
#&gt;             name longitude latitude      prov   date
#&gt;            &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;chr&gt; &lt;date&gt;
#&gt; 1 Pinus contorta -120.3358  39.1632 ecoengine   &lt;NA&gt;
#&gt; 2 Pinus contorta -119.9564  38.7905 ecoengine   &lt;NA&gt;
#&gt; 3 Pinus contorta -121.2308  40.3064 ecoengine   &lt;NA&gt;
#&gt; 4 Pinus contorta -121.2308  40.3064 ecoengine   &lt;NA&gt;
#&gt; 5 Pinus contorta -119.5066  37.6013 ecoengine   &lt;NA&gt;
#&gt; 6 Pinus contorta -119.5158  37.6024 ecoengine   &lt;NA&gt;
#&gt; # ... with 1 more variables: key &lt;chr&gt;</code></pre>
</div>
<div id="clean-data" class="section level2">
<h2 class="hasAnchor">
<a href="#clean-data" class="anchor"></a>Clean data</h2>
<p>All data cleaning functionality is in a new package <a href="https://github.com/ropensci/scrubr">scrubr</a>. <a href="https://cran.r-project.org/package=scrubr">On CRAN</a>.</p>
</div>
<div id="make-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#make-maps" class="anchor"></a>Make maps</h2>
<p>All mapping functionality is now in a separate package <a href="https://github.com/ropensci/mapr">mapr</a> (formerly known as <code>spoccutils</code>), to make <code>spocc</code> easier to maintain. <a href="https://cran.r-project.org/package=mapr">On CRAN</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#species-occurrence-data-spocc">Species occurrence data (spocc)</a><ul class="nav nav-pills nav-stacked">
<li><a href="#clean-data">Clean data</a></li>
      <li><a href="#make-maps">Make maps</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Scott Chamberlain.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
